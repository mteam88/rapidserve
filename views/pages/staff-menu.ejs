<!DOCTYPE html>
<html>
  <head>
    <%- include('../partials/_head') %>
  </head>
  <body>
    <div id="sidebar" class="sidebar">
      <span style="position: absolute;top:10px;"><img style="width: 55px;height: 55px;margin: 10px;" src="/public/assets/profile-icon.png"><span class="sidebar-text" style="bottom: 22px;color:white"><b>Profile</b></span></span>
      <span style="position: absolute;top:105px;"><img style="width: 55px;height: 55px;margin: 10px;" src="/public/assets/settings-icon.jpg"><span class="sidebar-text" style="bottom: 22px;color:white"><b>Settings</b></span></span>
      <span style="position: absolute;top:375px;"><img style="width: 55px;height: 55px;margin: 10px;" src="/public/assets/about-icon.png"><span class="sidebar-text" style="bottom: 22px;color:white"><b>About</b></span></span>
      <span style="position: absolute;bottom:10px;"><img style="width: 55px;height: 55px;margin: 10px;" src="/public/assets/logout-icon.png"><span class="sidebar-text" style="bottom: 22px;color:red"><b>Logout</b></span></span>
    </div>
    <div id="content" class="content">
      <div class="topnav shadow">
        <a class="navlogospot" href="/home"><img class="navlogo" src="/public/assets/Rlogo.png"></img></a>
        <a href="orders">Orders</a>
        <a class="active" href="menu">Menu</a>
      </div>
      <br> 
      <p>Welcome, lunch staff. Edit the menu with the button below.</p>
        <table id="menu-table">
          
        </table>
      <button onclick="EditMenu()">Edit Menu</button>
    </div>
    <script>
        var menuCheckStaff = window.setInterval(CreateMenuStaff, 100);
  
        function CreateMenuStaff() {
          if (menuObject) {
            clearInterval(menuCheckStaff);
            var loopAmount = 0;
            var tableRow = document.createElement("tr");
            tableRow.id = "menu-row0";
            for (var [key, value] of Object.entries(menuObject)) {
              if (value.length + 1 > loopAmount) {
                loopAmount = value.length + 1;
              }
              var rowCell = document.createElement("th");
              rowCell.innerHTML = key.replace(/_/g,"");
              tableRow.appendChild(rowCell);
            }
            document.getElementById("menu-table").appendChild(tableRow);
            for (var i = 0;i < loopAmount;i++) {
              if (i == 0) {
                continue;
              }
              var tableRow = document.createElement("tr");
              tableRow.id = "menu-row" + (1 + i);
              for (var [key, value] of Object.entries(menuObject)) {
                var rowCell = document.createElement("td");
                if (value.length >= i) {
                    rowCell.classList.add("staffMenuRowCell");
                    rowCell.innerHTML = value[i - 1];
                    tableRow.appendChild(rowCell);
                }
                tableRow.appendChild(rowCell);
              }
              document.getElementById("menu-table").appendChild(tableRow);
            }
          }
        }

        function EditMenu() {
            var tableRow = document.createElement("tr");
            tableRow.id = "menu-add-item";
            for (var [key, value] of Object.entries(menuObject)) {
              var rowCell = document.createElement("th");
              rowCell.innerHTML = "<b>+</b>";
              rowCell.style.textAlign = "center";
              rowCell.style.fontSize = "20px";
              rowCell.style.backgroundColor = "lightgreen";
              rowCell.classList.add("selectable");
              tableRow.appendChild(rowCell);
            }
            document.getElementById("menu-table").appendChild(tableRow);
            var rowCells = document.getElementsByClassName("staffMenuRowCell");
            var loopAmount = rowCells.length;
            for (var i = 0;i < loopAmount;i++) {
                var rowCell = rowCells[i];
            }
        }
      </script>
  </body>